---
- name: install zsh
  become: yes
  package:
    name: zsh
    state: latest

- name: clone oh-my-zsh
  git:
    repo: https://github.com/robbyrussell/oh-my-zsh.git
    dest: ~/.oh-my-zsh

- name: create new zsh configuration file
  copy:
    src: ~/.oh-my-zsh/templates/zshrc.zsh-template
    dest: ~/.zshrc
    force: no

- name: change shell to zsh
  become: yes
  user:
    name: "{{ ansible_env['USER'] }}"
    shell: /bin/zsh

- name: added custom_zshrc
  blockinfile:
    path: ~/.zshrc
    block: "{{ lookup('file', 'custom_zshrc') }}"
